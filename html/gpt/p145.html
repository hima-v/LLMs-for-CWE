<!-- buy.html -->
<form id="buyForm">
  <label>
    Stock Name:
    <input name="stock_name" required />
  </label>
  <label>
    Quantity:
    <input name="quantity" type="number" min="1" required />
  </label>
  <button id="buyBtn" type="submit">Buy</button>
</form>

<script>
  async function buy_stock(event) {
    event.preventDefault(); // called when user clicks buy (submit)

    const form = event.target;
    const stockName = form.stock_name.value.trim();
    const quantity = Number(form.quantity.value);

    const resp = await fetch("/buy", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ stock_name: stockName, quantity })
    });

    const data = await resp.json();
    alert(data.message ?? "Done");
  }

  document.getElementById("buyForm").addEventListener("submit", buy_stock);
</script>
